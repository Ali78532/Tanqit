<!DOCTYPE html><html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>التنقيط</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      margin: 0;
      padding: 0;
      text-align: center;
      direction: rtl;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      background: linear-gradient(135deg, #6DD5FA, #FFFFFF);
      background-attachment: fixed;
    }
    .header {
      color: #111;
      font-size: 2.5em;
      font-weight: bold;
      margin: 20px 0;
    }
    /* جعل الحاوية الشاملة شفافة */
    .container {
      max-width: 90%;
      margin: 0 auto;
    }
    /* إضافة خلفية بيضاء و ظل فقط لشاشة الأسئلة */
    .quiz-screen {
      display: none;
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
      margin-bottom: 20px;
    }
    .quiz-screen.active {
      display: block;
    }
    .video-screen {
      display: none;
    }
    .video-screen.active {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    /* قسم الفيديو */
    .video-container {
      width: 100%;
      max-width: 360px;
      aspect-ratio: 3 / 4;
      margin: 0px auto 30px;
    }
    .video-container iframe {
      width: 100%;
      height: 100%;
      border: 1px solid #000;
      border-radius: 10px;
    }
    .video-text {
      font-size: 1.5em;
      margin-bottom: 20px;
      color: #333;
    }
    .start-btn {
      padding: 12px 24px;
      font-size: 1em;
      border: none;
      border-radius: 10px;
      background: #006400;
      color: white;
      cursor: pointer;
      transition: background 0.3s ease-in-out;
    }
    .start-btn:hover {
      background: #004d00;
    }
    .question-box {
      background: #eeeeee;
      border: 2px solid #007ACC;
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 20px;
    }
    .sentence {
      font-size: 1em;
      margin: 10px 0;
      line-height: 2em;
      text-align: left;
      direction: ltr;
    }
    .feedback {
      text-align: right;
      margin-top: 10px;
      font-size: 1em;
      color: red;
    }
    .word {
      display: inline-block;
      margin: 0 5px;
      padding: 5px;
      font-size: 1.2em;
      cursor: pointer;
      border-radius: 5px;
      transition: transform 0.2s ease-in-out, background-color 0.2s;
    }
    .word:hover {
      transform: scale(1.1);
      background-color: #f1f1f1;
    }
    .correct {
      color: green;
      font-weight: bold;
    }
    .incorrect {
      color: red;
      font-weight: bold;
    }
    .result {
      margin-top: 20px;
      font-size: 2em;
      font-weight: bold;
    }
    button.check-btn {
      margin-top: 20px;
      padding: 15px 25px;
      font-size: 1em;
      border: none;
      border-radius: 10px;
      background: #007ACC;
      color: white;
      cursor: pointer;
      transition: background 0.3s ease-in-out, transform 0.2s ease-in-out;
    }
    button.check-btn:hover {
      background: #005A99;
      transform: scale(1.05);
    }
    #toggle-container {
      margin-top: 20px;
      display: none;
    }
    #hide-btn, #show-btn {
      background: transparent;
      border: 2px solid #000;
      color: #000;
      margin: 5px;
      padding: 10px 20px;
      font-size: 1em;
      border-radius: 10px;
    }
    #show-btn { display: none; }
    footer {
      margin: 20px 0;
      font-size: 1em;
      color: #333;
    }
	#spinner {
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
	width: 50px;
	height: 50px;
	border: 6px solid rgba(255,255,255,0.3);
	border-top-color: #fff;
	border-radius: 50%;
	animation: spin 1s linear infinite;
	z-index: 10;
	background-color: #000;
	}

@keyframes spin {
	from {
		transform: translate(-50%, -50%) rotate(0deg);
	}
	to {
		transform: translate(-50%, -50%) rotate(360deg);
		}
	}

  </style>
</head>
<body>
  <div class="header">التنقيط</div>
  <div class="container">
    <div class="video-screen active" id="video-screen">
           <div class="video-text">شوف الفيديو علمود تعرف شلون تمتحن 👇</div>
      <div class="video-container">
      <div id="spinner"></div>
	  <iframe
      id="quiz-video"
	  src="https://www.youtube.com/embed/fGQGPE72Pr0?si=rT6zpBDsLjGCkYwS"
                title="شرح طريقة التمتحن"
                allowfullscreen></iframe>
      </div>
       <button class="start-btn" id="start-btn">أبدأ الاختبار</button>
	</div>
    <div class="quiz-screen" id="quiz-screen">
      <div id="questions-container"></div>
      <button class="check-btn" id="checkButton" onclick="checkResults()">تحقق</button>
      <div class="result" id="final-result"></div>
      <div id="toggle-container">
        <button id="hide-btn">إخفاء الحل</button>
        <button id="show-btn">عرض الحل</button>
      </div>
    </div>
  </div>
  <footer>إعداد الأستاذ: علي حسين</footer>   <script>
    const sentences = [
      { text: "was ali in basra last may?", correct: "Was Ali in Basra last May?", feedback: { "was": "* كلمة was لازم تبدي بحرف كبير لانها في بداية الجملة", "ali": "* كلمة ali لازم تبدي بحرف كبير لانه اسم شخصية", "basra": "* كلمة basra لازم تبدي بحرف كبير لانها اسم محافظة", "may?": "* كلمة may لازم تبدي بحرف كبير لانه اسم شهر" } },
      { text: "on thursday, i relax.", correct: "On Thursday, I relax.", feedback: { "on": "* كلمة on لازم تبدي بحرف كبير لانها في بداية الجملة", "thursday,": "* كلمة thursday لازم تبدي بحرف كبير لانها من ايام الاسبوع", "i": "* الضمير i يكتب كبير اينما وجد" } }
    ];

    function loadQuestions() {
      const container = document.getElementById("questions-container");
      container.innerHTML = "";
      sentences.forEach((sentence, i) => {
        const box = document.createElement("div"); box.className = "question-box";
        const sentEl = document.createElement("div"); sentEl.className = "sentence";
        const num = document.createElement("span"); num.textContent = `${i+1}. `; num.style.fontWeight = "bold";
        sentEl.appendChild(num);
        sentence.text.split(" ").forEach(word => {
          const span = document.createElement("span"); span.textContent = word; span.className = "word";
          span.onclick = () => toggleCapitalization(span);
          sentEl.appendChild(span);
        });
        const fbCont = document.createElement("div"); fbCont.id = `feedback-${i}`; fbCont.className = "feedback";
        box.append(sentEl, fbCont);
        container.appendChild(box);
      });
    }

    function toggleCapitalization(el) {
      const text = el.textContent;
      el.textContent = text.charAt(0) === text.charAt(0).toUpperCase()
        ? text.charAt(0).toLowerCase() + text.slice(1)
        : text.charAt(0).toUpperCase() + text.slice(1);
      if (navigator.vibrate) navigator.vibrate(30);
    }

    function checkResults() {
      let score = 0;
      document.querySelectorAll(".feedback").forEach(f => f.innerHTML = "");
      document.querySelectorAll(".word").forEach(w => w.classList.remove("correct","incorrect"));
      const boxes = document.querySelectorAll(".question-box");
      sentences.forEach((s, idx) => {
        const words = boxes[idx].querySelectorAll(".word");
        const correctWords = s.correct.split(" ");
        words.forEach((w, i) => {
          if(w.textContent === correctWords[i]) { score++; w.classList.add("correct"); }
          else {
            w.classList.add("incorrect");
            const fb = s.feedback[correctWords[i].toLowerCase()];
            if(fb) {
              const d = document.createElement("div"); d.textContent = fb;
              document.getElementById(`feedback-${idx}`).append(d);
            }
          }
        });
      });
      document.getElementById("final-result").innerHTML = `درجتك ${score}`;
      document.getElementById("checkButton").style.display = "none";
      document.getElementById("toggle-container").style.display = "block";
      document.getElementById("final-result").scrollIntoView({behavior:"smooth"});
    }

    document.getElementById('start-btn').addEventListener('click', () => {
      // إيقاف وتحميل الفيديو مجدداً لإيقاف التشغيل
      const iframe = document.querySelector('#video-screen iframe');
      iframe.src = iframe.src;
      // تبديل العرض
      document.getElementById('video-screen').classList.remove('active');
      document.getElementById('quiz-screen').classList.add('active');
      loadQuestions();
    });

    // إعداد أزرار إخفاء/عرض الحل
    document.getElementById("toggle-container").style.display = "none";
    document.getElementById("hide-btn").addEventListener("click", () => {
      document.getElementById("questions-container").style.display = "none";
      document.getElementById("hide-btn").style.display = "none";
      document.getElementById("show-btn").style.display = "inline-block";
    });
    document.getElementById("show-btn").addEventListener("click", () => {
      document.getElementById("questions-container").style.display = "";
      document.getElementById("show-btn").style.display = "none";
      document.getElementById("hide-btn").style.display = "inline-block";
    });
	const spinner = document.getElementById('spinner');
	const iframe  = document.getElementById('quiz-video');

	// عندما ينتهي تحميل الـ iframe
	iframe.addEventListener('load', () => {
	spinner.style.display = 'none';
	});

  </script>
  </body>
</html>